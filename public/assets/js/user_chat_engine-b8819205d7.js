class ChatEngineUser{constructor(s,e,o){this.profileId=o,this.customBox=s,this.chatBox=$("#"+s),this.userEmail=e,this.socket=io.connect("http://localhost:5000"),this.userEmail&&this.connectionHandler()}connectionHandler(){let s=this;this.socket.on("connect",(function(){console.log("User Connection Estabilished using sockets....."),s.socket.emit("join_user_room",{user_email:s.userEmail,chatroom:s.customBox}),s.socket.on("custom_user_joined",(function(s){console.log("custom user joined in chatroom, data : ",s)}))})),$("#send-user-msg").click((function(){let e=$(".user-chat-input").val(),o={msg:e,email:s.userEmail,chatroom:s.customBox,profile_id:s.profileId};""!=e&&(console.log(o,"llk"),$.post("/home-msg",{myData:o},(function(s,e,o){console.log(e,"**")})),s.socket.emit("send_user_message",{message:e,user_email:s.userEmail,chatroom:s.customBox}))})),s.socket.on("receive_user_message",(function(e){console.log("user message received, data_msg : ",e.message);let o=$("<li>"),t="other-msg1";e.user_email==s.userEmail&&(t="self-msg1"),o.append($("<span>",{html:e.message}));let c=new Date,l=c.getHours(),i=c.getMinutes();l<10&&(l="0"+l),i<10&&(i="0"+i);let n=l+":"+i;o.append($("<sub>",{html:n})),o.addClass(t),$(".user-chat-list").append(o),$(".user-chat-input").val(""),$(".user-chats").scrollTop($(".user-chats")[0].scrollHeight)}))}}$(".user-chats").scrollTop($(".user-chats")[0].scrollHeight);